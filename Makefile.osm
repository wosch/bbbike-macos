###############################################################
# Wolfram Schneider, Aug 2008
#
# Get and convert OpenStreetMap.org data to BBBike
#
# For more information about BBBike, visit http://www.bbbike.de
#
# $Id: Makefile.osm,v 1.61 2009/03/09 23:01:49 wosch Exp $


OSMBIKE_DATA=	data-osm.tgz
DOWNLOADOSM=	./miscsrc/downloadosm --debug=0 --step=0.02
OSM2BBD=	perl ./miscsrc/osm2bbd --debug=0 -f -map bbbike

BBBIKE_WEB_DIR= /usr/local/www/elsif.de/bbbike
OSM_DIR=	osm
DATA_OSM_DIR=	data-osm
CITIES=		\
	Amsterdam \
	Austin \
	Basel \
	Cambridge \
	Cracow \
	Colmar \
	Copenhagen \
	Erlangen \
	Freiburg \
	Hannover \
	Karlsruhe \
	Laibach \
	New_York \
	Portland \
	San_Francisco \
	Santa_Cruz \
	Toronto \
	Wien \
	Zuerich \
	Aachen \
	Bielefeld \
	Bonn \
	Bremen \
	Dresden \
	Duesseldorf \
	Erfurt \
	Frankfurt \
	Goettingen \
	Hamburg \
	Jena \
	Koeln \
	Leipzig \
	Luebeck \
	Mainz \
	Muenster \
	Rostock \
	Strassburg \
	Providence \
	Ruegen \
	Chemnitz \
	London \
	Zagreb \
	Prag \
	Budapest \
	Danzig \
	Goerlitz \
	FrankfurtOder \
	Stettin \
	Turin \
	Cottbus \
	BrandenburgHavel \
	WarenMueritz \
	Paris


all: help

tarball: convert-workarounds
	tar cf - data-osm | gzip > ${OSMBIKE_DATA}.tmp
	mv -f ${OSMBIKE_DATA}.tmp ${OSMBIKE_DATA}

cities: 
	${MAKE} _cities
	${MAKE} _cities
	${MAKE} _cities

_cities: 
	@for i in ${CITIES}; do \
	    ${MAKE} -f Makefile.osm $$i-download || \
	    ${MAKE} -f Makefile.osm $$i-download || \
	    ${MAKE} -f Makefile.osm $$i-download || \
	    ${MAKE} -f Makefile.osm $$i-download || \
	    ${MAKE} -f Makefile.osm $$i-download || \
		echo "please run me again: $$i"; \
	done

convert: 
	rm -rf data-osm.old
	test -e data-osm && mv data-osm data-osm.old
	mkdir -p data-osm
	for i in ${CITIES}; do ${MAKE} -f Makefile.osm "$$i"-convert & done; wait

convert-workarounds: convert-workarounds2 green-ways missing-files cleanup-files

convert-workarounds2:
	for city in ${CITIES}; do \
		../bbbike-macos/bin/strasse-str data-osm/$$city/strassen; \
		../bbbike-macos/bin/berlin-coords-data data-osm/$$city/strassen > data-osm/$$city/Berlin.coords.data; \
		../bbbike-macos/bin/opensearch-suggestion data-osm/$$city/strassen > data-osm/$$city/opensearch.streetnames; \
	done

missing-files:
	@for i in data-osm/*; do (cd $$i && touch ubahn ubahnhof sbahn sbahnhof rbahn rbahnhof Berlin.coords.data Potsdam.coords.data plaetze); done # workaround for bug in osm2bbd

cleanup-files:
	#rm -f data-osm/*/meta.*
	rm -f data-osm/*/_*
	rm -f data-osm/*/*.bak

green-ways:
	for i in data-osm/*; do (cd $$i && perl -npe 's/^\s/XYZ\t/; s/RW1/green2/g' radwege_exact > green); done

# bbbike @ Copenhagen
Copenhagen: Copenhagen-download Copenhagen-convert
Copenhagen-download: 
	mkdir -p ${OSM_DIR}/Copenhagen
	${DOWNLOADOSM} -o ${OSM_DIR}/Copenhagen -- 12.275 55.549 12.702 55.831
Copenhagen-convert:
	${OSM2BBD} -centerdelta 12.44,55.56 -o ${DATA_OSM_DIR}/Copenhagen ${OSM_DIR}/Copenhagen

# bbbike @ Karlsruhe
Karlsruhe: Karlsruhe-download Karlsruhe-convert
Karlsruhe-download:
	mkdir -p ${OSM_DIR}/Karlsruhe
	${DOWNLOADOSM} -o ${OSM_DIR}/Karlsruhe -- 8.295 48.964 8.478 49.126
Karlsruhe-convert:
	${OSM2BBD} -centerdelta 8.275,48.894 -o ${DATA_OSM_DIR}/Karlsruhe ${OSM_DIR}/Karlsruhe

# bbbike @ San Francisco
San_Francisco: San_Francisco-download San_Francisco-convert
San_Francisco-download:
	mkdir -p ${OSM_DIR}/San_Francisco
	${DOWNLOADOSM} -o ${OSM_DIR}/San_Francisco -- -122.527 37.594 -122.351 37.811
San_Francisco-convert:
	${OSM2BBD} -centerdelta -122.55,37.67 -o ${DATA_OSM_DIR}/San_Francisco ${OSM_DIR}/San_Francisco

# bbbike @ Santa Cruz
Santa_Cruz: Santa_Cruz-download Santa_Cruz-convert
Santa_Cruz-download:
	mkdir -p ${OSM_DIR}/Santa_Cruz
	${DOWNLOADOSM} -o ${OSM_DIR}/Santa_Cruz -- -122.087 36.941 -121.917 37.013
Santa_Cruz-convert:
	${OSM2BBD} -centerdelta -122.12,36.845 -o ${DATA_OSM_DIR}/Santa_Cruz ${OSM_DIR}/Santa_Cruz

# bbbike @ Basel
Basel: Basel-download Basel-convert
Basel-download:
	mkdir -p ${OSM_DIR}/Basel
	${DOWNLOADOSM} -o ${OSM_DIR}/Basel -- 7.5298 47.5128 7.6823 47.5943
Basel-convert:
	${OSM2BBD} -centerdelta 7.47,47.44 -o ${DATA_OSM_DIR}/Basel ${OSM_DIR}/Basel


# bbbike @ Amsterdam
Amsterdam: Amsterdam-download Amsterdam-convert
Amsterdam-download:
	mkdir -p ${OSM_DIR}/Amsterdam
	${DOWNLOADOSM} -o ${OSM_DIR}/Amsterdam -- 4.7982 52.3206 5.0265 52.4309
Amsterdam-convert:
	${OSM2BBD} -centerdelta 4.77,52.25 -o ${DATA_OSM_DIR}/Amsterdam ${OSM_DIR}/Amsterdam

# bbbike @ Erlangen
Erlangen: Erlangen-download Erlangen-convert
Erlangen-download:
	mkdir -p ${OSM_DIR}/Erlangen
	${DOWNLOADOSM} -o ${OSM_DIR}/Erlangen -- 10.9636 49.5208 11.0606 49.6199
Erlangen-convert:
	${OSM2BBD} -centerdelta 10.87,49.48 -o ${DATA_OSM_DIR}/Erlangen ${OSM_DIR}/Erlangen

# bbbike @ Freiburg
Freiburg: Freiburg-download Freiburg-convert
Freiburg-download:
	mkdir -p ${OSM_DIR}/Freiburg
	${DOWNLOADOSM} -o ${OSM_DIR}/Freiburg -- 7.7758 47.9677 7.9087 48.0393
Freiburg-convert:
	${OSM2BBD} -centerdelta 7.73,47.88 -o ${DATA_OSM_DIR}/Freiburg ${OSM_DIR}/Freiburg

# bbbike @ Hannover
Hannover: Hannover-download Hannover-convert
Hannover-download:
	mkdir -p ${OSM_DIR}/Hannover
	${DOWNLOADOSM} -o ${OSM_DIR}/Hannover -- 9.583 52.308 9.92 52.473
Hannover-convert:
	${OSM2BBD} -centerdelta 9.61,52.25 -o ${DATA_OSM_DIR}/Hannover ${OSM_DIR}/Hannover

# bbbike @ Colmar
Colmar: Colmar-download Colmar-convert
Colmar-download:
	mkdir -p ${OSM_DIR}/Colmar
	${DOWNLOADOSM} -o ${OSM_DIR}/Colmar -- 7.305 48.0471 7.4086 48.1236
Colmar-convert:
	${OSM2BBD} -centerdelta 7.23,47.96 -o ${DATA_OSM_DIR}/Colmar ${OSM_DIR}/Colmar

# bbbike @ Zuerich
Zuerich: Zuerich-download Zuerich-convert
Zuerich-download:
	mkdir -p ${OSM_DIR}/Zuerich
	${DOWNLOADOSM} -o ${OSM_DIR}/Zuerich -- 8.4483 47.3437 8.6271 47.4185
Zuerich-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Zuerich ${OSM_DIR}/Zuerich


# bbbike @ Portland
Portland: Portland-download Portland-convert
Portland-download:
	mkdir -p ${OSM_DIR}/Portland
	#${DOWNLOADOSM} -o ${OSM_DIR}/Portland -- -122.99 45.74 -122.37 45.34
	${DOWNLOADOSM} -o ${OSM_DIR}/Portland -- -122.81 45.43 -122.53 45.59
Portland-convert:
	${OSM2BBD} -centerdelta -122.80,45.40 -o ${DATA_OSM_DIR}/Portland ${OSM_DIR}/Portland

# bbbike @ Wien
Wien: Wien-download Wien-convert
Wien-download:
	mkdir -p ${OSM_DIR}/Wien
	${DOWNLOADOSM} -o ${OSM_DIR}/Wien -- 16.2779 48.1592 16.4976 48.2636
Wien-convert:
	${OSM2BBD} -centerdelta 16.24,48.09 -o ${DATA_OSM_DIR}/Wien ${OSM_DIR}/Wien

# bbbike @ Laibach
Laibach: Laibach-download Laibach-convert
Laibach-download:
	mkdir -p ${OSM_DIR}/Laibach
	${DOWNLOADOSM} -o ${OSM_DIR}/Laibach -- 14.43 46.01 14.64 46.13
Laibach-convert:
	${OSM2BBD} -centerdelta 14.39,45.93 -o ${DATA_OSM_DIR}/Laibach ${OSM_DIR}/Laibach

# bbbike @ Cracow
Cracow: Cracow-download Cracow-convert
Cracow-download:
	mkdir -p ${OSM_DIR}/Cracow
	${DOWNLOADOSM} -o ${OSM_DIR}/Cracow -- 19.88 50.02 20.00 50.09
Cracow-convert:
	${OSM2BBD} -centerdelta 19.82,49.94 -o ${DATA_OSM_DIR}/Cracow ${OSM_DIR}/Cracow

# bbbike @ Cambridge
Cambridge: Cambridge-download Cambridge-convert
Cambridge-download:
	mkdir -p ${OSM_DIR}/Cambridge
	${DOWNLOADOSM} -o ${OSM_DIR}/Cambridge -- 0.0593 52.1708 0.2018 52.2577
Cambridge-convert:
	${OSM2BBD} -centerdelta 0.00,52.085 -o ${DATA_OSM_DIR}/Cambridge ${OSM_DIR}/Cambridge

rsync-source:
	rsync -azv -C --exclude osm   --safe-links  $$HOME/projects/bbbike/ srand.de:/usr/local/www/srand.de/bbbike
	rsync -azv -C --exclude osm   --safe-links  $$HOME/projects/bbbike/ elsif.de:/usr/local/www/elsif.de/bbbike

# bbbike @ Austin
Austin: Austin-download Austin-convert
Austin-download:
	mkdir -p ${OSM_DIR}/Austin
	${DOWNLOADOSM} -o ${OSM_DIR}/Austin -- -97.798 30.216 -97.675 30.316
Austin-convert:
	${OSM2BBD} -centerdelta -97.87,30.15 -o ${DATA_OSM_DIR}/Austin ${OSM_DIR}/Austin

# bbbike @ New York
New_York: New_York-download New_York-convert
New_York-download:
	mkdir -p ${OSM_DIR}/New_York
	${DOWNLOADOSM} -o ${OSM_DIR}/New_York -- -74.063 40.67 -73.894 40.827
New_York-convert:
	${OSM2BBD} -centerdelta -74.12,40.59 -o ${DATA_OSM_DIR}/New_York ${OSM_DIR}/New_York

# bbbike @ Toronto
Toronto: Toronto-download Toronto-convert
Toronto-download:
	mkdir -p ${OSM_DIR}/Toronto
	${DOWNLOADOSM} -o ${OSM_DIR}/Toronto -- -79.674 43.602 -79.077 43.849
Toronto-convert:
	${OSM2BBD} -centerdelta -79.674,43.602 -o ${DATA_OSM_DIR}/Toronto ${OSM_DIR}/Toronto


##############################################################################################
# bbbike @ Aachen
Aachen: Aachen-download Aachen-convert
Aachen-download:
	mkdir -p ${OSM_DIR}/Aachen
	${DOWNLOADOSM} -o ${OSM_DIR}/Aachen -- 6.0388 50.7388 6.1549 50.8076
Aachen-convert:
	${OSM2BBD} -centerdelta 6.03,50.73 -o ${DATA_OSM_DIR}/Aachen ${OSM_DIR}/Aachen

# bbbike @ Bielefeld
Bielefeld: Bielefeld-download Bielefeld-convert
Bielefeld-download:
	mkdir -p ${OSM_DIR}/Bielefeld
	${DOWNLOADOSM} -o ${OSM_DIR}/Bielefeld -- 8.399 51.946 8.657 52.071
Bielefeld-convert:
	${OSM2BBD} -centerdelta 8.39,51.94 -o ${DATA_OSM_DIR}/Bielefeld ${OSM_DIR}/Bielefeld

# bbbike @ Bonn
Bonn: Bonn-download Bonn-convert
Bonn-download:
	mkdir -p ${OSM_DIR}/Bonn
	${DOWNLOADOSM} -o ${OSM_DIR}/Bonn -- 6.971 50.621 7.289 50.813
Bonn-convert:
	${OSM2BBD} -centerdelta 6.97,50.62 -o ${DATA_OSM_DIR}/Bonn ${OSM_DIR}/Bonn

# bbbike @ Bremen
Bremen: Bremen-download Bremen-convert
Bremen-download:
	mkdir -p ${OSM_DIR}/Bremen
	${DOWNLOADOSM} -o ${OSM_DIR}/Bremen -- 8.704 53.007 9.001 53.137
Bremen-convert:
	${OSM2BBD} -centerdelta 8.70,53.00 -o ${DATA_OSM_DIR}/Bremen ${OSM_DIR}/Bremen

# bbbike @ Dresden
Dresden: Dresden-download Dresden-convert
Dresden-download:
	mkdir -p ${OSM_DIR}/Dresden
	${DOWNLOADOSM} -o ${OSM_DIR}/Dresden -- 13.61 50.97 13.922 51.119
Dresden-convert:
	${OSM2BBD} -centerdelta 13.61,50.97 -o ${DATA_OSM_DIR}/Dresden ${OSM_DIR}/Dresden

# bbbike @ Duesseldorf
Duesseldorf: Duesseldorf-download Duesseldorf-convert
Duesseldorf-download:
	mkdir -p ${OSM_DIR}/Duesseldorf
	${DOWNLOADOSM} -o ${OSM_DIR}/Duesseldorf -- 6.637 51.145 6.959 51.295
Duesseldorf-convert:
	${OSM2BBD} -centerdelta 6.637,51.145 -o ${DATA_OSM_DIR}/Duesseldorf ${OSM_DIR}/Duesseldorf

# bbbike @ Erfurt
Erfurt: Erfurt-download Erfurt-convert
Erfurt-download:
	mkdir -p ${OSM_DIR}/Erfurt
	${DOWNLOADOSM} -o ${OSM_DIR}/Erfurt -- 10.969 50.9454 11.0991 51.0087
Erfurt-convert:
	${OSM2BBD} -centerdelta 10.969,50.9454 -o ${DATA_OSM_DIR}/Erfurt ${OSM_DIR}/Erfurt

# bbbike @ Frankfurt
Frankfurt: Frankfurt-download Frankfurt-convert
Frankfurt-download:
	mkdir -p ${OSM_DIR}/Frankfurt
	${DOWNLOADOSM} -o ${OSM_DIR}/Frankfurt -- 8.44 50.02 8.979 50.185
Frankfurt-convert:
	${OSM2BBD} -centerdelta 8.66,50.10 -o ${DATA_OSM_DIR}/Frankfurt ${OSM_DIR}/Frankfurt

# bbbike @ Goettingen
Goettingen: Goettingen-download Goettingen-convert
Goettingen-download:
	mkdir -p ${OSM_DIR}/Goettingen
	${DOWNLOADOSM} -o ${OSM_DIR}/Goettingen -- 9.8519 51.494 9.9917 51.5818
Goettingen-convert:
	${OSM2BBD} -centerdelta 9.8519,51.494 -o ${DATA_OSM_DIR}/Goettingen ${OSM_DIR}/Goettingen

# bbbike @ Hamburg
Hamburg: Hamburg-download Hamburg-convert
Hamburg-download:
	mkdir -p ${OSM_DIR}/Hamburg
	${DOWNLOADOSM} -o ${OSM_DIR}/Hamburg -- 9.77 53.426 10.24 53.663
Hamburg-convert:
	${OSM2BBD} -centerdelta 9.77,53.426 -o ${DATA_OSM_DIR}/Hamburg ${OSM_DIR}/Hamburg

# bbbike @ Jena
Jena: Jena-download Jena-convert
Jena-download:
	mkdir -p ${OSM_DIR}/Jena
	${DOWNLOADOSM} -o ${OSM_DIR}/Jena -- 11.5241 50.8597 11.6696 50.9705
Jena-convert:
	${OSM2BBD} -centerdelta 11.52,50.85 -o ${DATA_OSM_DIR}/Jena ${OSM_DIR}/Jena

# bbbike @ Koeln
Koeln: Koeln-download Koeln-convert
Koeln-download:
	mkdir -p ${OSM_DIR}/Koeln
	${DOWNLOADOSM} -o ${OSM_DIR}/Koeln -- 6.823 50.865 7.108 51.015
Koeln-convert:
	${OSM2BBD} -centerdelta 6.82,50.86 -o ${DATA_OSM_DIR}/Koeln ${OSM_DIR}/Koeln

# bbbike @ Leipzig
Leipzig: Leipzig-download Leipzig-convert
Leipzig-download:
	mkdir -p ${OSM_DIR}/Leipzig
	${DOWNLOADOSM} -o ${OSM_DIR}/Leipzig -- 12.271 51.27 12.502 51.4
Leipzig-convert:
	${OSM2BBD} -centerdelta 12.27,51.27 -o ${DATA_OSM_DIR}/Leipzig ${OSM_DIR}/Leipzig

# bbbike @ Luebeck
Luebeck: Luebeck-download Luebeck-convert
Luebeck-download:
	mkdir -p ${OSM_DIR}/Luebeck
	${DOWNLOADOSM} -o ${OSM_DIR}/Luebeck -- 10.574 53.82 10.806 53.933
Luebeck-convert:
	${OSM2BBD} -centerdelta 10.57,53.82 -o ${DATA_OSM_DIR}/Luebeck ${OSM_DIR}/Luebeck

# bbbike @ Mainz
Mainz: Mainz-download Mainz-convert
Mainz-download:
	mkdir -p ${OSM_DIR}/Mainz
	${DOWNLOADOSM} -o ${OSM_DIR}/Mainz -- 8.1339 49.9325 8.4123 50.1077
Mainz-convert:
	${OSM2BBD} -centerdelta 8.13,49.93 -o ${DATA_OSM_DIR}/Mainz ${OSM_DIR}/Mainz

# bbbike @ Muenster
Muenster: Muenster-download Muenster-convert
Muenster-download:
	mkdir -p ${OSM_DIR}/Muenster
	${DOWNLOADOSM} -o ${OSM_DIR}/Muenster -- 7.5771 51.9226 7.6873 51.9917
Muenster-convert:
	${OSM2BBD} -centerdelta 7.57,51.92 -o ${DATA_OSM_DIR}/Muenster ${OSM_DIR}/Muenster

# bbbike @ Rostock
Rostock: Rostock-download Rostock-convert
Rostock-download:
	mkdir -p ${OSM_DIR}/Rostock
	${DOWNLOADOSM} -o ${OSM_DIR}/Rostock -- 12.0204 54.0599 12.2271 54.1933
Rostock-convert:
	${OSM2BBD} -centerdelta 12.02,54.05 -o ${DATA_OSM_DIR}/Rostock ${OSM_DIR}/Rostock

# bbbike @ Strassburg
Strassburg: Strassburg-download Strassburg-convert
Strassburg-download:
	mkdir -p ${OSM_DIR}/Strassburg
	${DOWNLOADOSM} -o ${OSM_DIR}/Strassburg -- 7.6515 48.5189 7.875 48.6525
Strassburg-convert:
	${OSM2BBD} -centerdelta 7.65,48.51 -o ${DATA_OSM_DIR}/Strassburg ${OSM_DIR}/Strassburg

# bbbike @ Providence
Providence: Providence-download Providence-convert
Providence-download:
	mkdir -p ${OSM_DIR}/Providence
	${DOWNLOADOSM} -o ${OSM_DIR}/Providence -- -71.5273 41.7378 -71.3141 41.9006
Providence-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Providence ${OSM_DIR}/Providence


# bbbike @ Ruegen
Ruegen: Ruegen-download Ruegen-convert
Ruegen-download:
	mkdir -p ${OSM_DIR}/Ruegen
	${DOWNLOADOSM} -o ${OSM_DIR}/Ruegen -- 12.904 54.199 13.81 54.708
Ruegen-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Ruegen ${OSM_DIR}/Ruegen

# bbbike @ Chemnitz
Chemnitz: Chemnitz-download Chemnitz-convert
Chemnitz-download:
	mkdir -p ${OSM_DIR}/Chemnitz
	${DOWNLOADOSM} -o ${OSM_DIR}/Chemnitz -- 12.8152 50.7803 13.0154 50.8796
Chemnitz-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Chemnitz ${OSM_DIR}/Chemnitz


# bbbike @ Paris
Paris: Paris-download Paris-convert
Paris-download:
	mkdir -p ${OSM_DIR}/Paris
	${DOWNLOADOSM} -o ${OSM_DIR}/Paris -- 2.2168 48.7974 2.4681 48.9241
Paris-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Paris ${OSM_DIR}/Paris


# bbbike @ London
London: London-download London-convert
London-download:
	mkdir -p ${OSM_DIR}/London
	${DOWNLOADOSM} -o ${OSM_DIR}/London -- -0.2417 51.4403 0.023 51.5621
London-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/London ${OSM_DIR}/London

# bbbike @ Zagreb
Zagreb: Zagreb-download Zagreb-convert
Zagreb-download:
	mkdir -p ${OSM_DIR}/Zagreb
	${DOWNLOADOSM} -o ${OSM_DIR}/Zagreb -- 15.8652 45.7381 16.1155 45.8511
Zagreb-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Zagreb ${OSM_DIR}/Zagreb

# bbbike @ Prag
Prag: Prag-download Prag-convert
Prag-download:
	mkdir -p ${OSM_DIR}/Prag
	${DOWNLOADOSM} -o ${OSM_DIR}/Prag -- 14.3016 50.0241 14.6009 50.1468
Prag-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Prag ${OSM_DIR}/Prag


# bbbike @ Budapest
Budapest: Budapest-download Budapest-convert
Budapest-download:
	mkdir -p ${OSM_DIR}/Budapest
	${DOWNLOADOSM} -o ${OSM_DIR}/Budapest -- 18.9482 47.434 19.1556 47.5407
Budapest-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Budapest ${OSM_DIR}/Budapest


# bbbike @ Danzig
Danzig: Danzig-download Danzig-convert
Danzig-download:
	mkdir -p ${OSM_DIR}/Danzig
	${DOWNLOADOSM} -o ${OSM_DIR}/Danzig -- 18.411 54.303 18.812 54.57
Danzig-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Danzig ${OSM_DIR}/Danzig

# bbbike @ Goerlitz
Goerlitz: Goerlitz-download Goerlitz-convert
Goerlitz-download:
	mkdir -p ${OSM_DIR}/Goerlitz
	${DOWNLOADOSM} -o ${OSM_DIR}/Goerlitz -- 14.9082 51.0989 15.0494 51.1891
Goerlitz-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Goerlitz ${OSM_DIR}/Goerlitz

# bbbike @ FrankfurtOder
FrankfurtOder: FrankfurtOder-download FrankfurtOder-convert
FrankfurtOder-download:
	mkdir -p ${OSM_DIR}/FrankfurtOder
	${DOWNLOADOSM} -o ${OSM_DIR}/FrankfurtOder -- 14.4804 52.3074 14.6026 52.3724
FrankfurtOder-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/FrankfurtOder ${OSM_DIR}/FrankfurtOder

# bbbike @ Stettin
Stettin: Stettin-download Stettin-convert
Stettin-download:
	mkdir -p ${OSM_DIR}/Stettin
	${DOWNLOADOSM} -o ${OSM_DIR}/Stettin -- 14.4419 53.3575 14.7299 53.4764
Stettin-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Stettin ${OSM_DIR}/Stettin

# bbbike @ Turin
Turin: Turin-download Turin-convert
Turin-download:
	mkdir -p ${OSM_DIR}/Turin
	${DOWNLOADOSM} -o ${OSM_DIR}/Turin -- 7.6221 45.0155 7.7594 45.1106
Turin-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Turin ${OSM_DIR}/Turin

# bbbike @ Cottbus
Cottbus: Cottbus-download Cottbus-convert
Cottbus-download:
	mkdir -p ${OSM_DIR}/Cottbus
	${DOWNLOADOSM} -o ${OSM_DIR}/Cottbus -- 14.2561 51.7092 14.435 51.8101
Cottbus-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/Cottbus ${OSM_DIR}/Cottbus


# bbbike @ BrandenburgHavel
BrandenburgHavel: BrandenburgHavel-download BrandenburgHavel-convert
BrandenburgHavel-download:
	mkdir -p ${OSM_DIR}/BrandenburgHavel
	${DOWNLOADOSM} -o ${OSM_DIR}/BrandenburgHavel -- 12.4647 52.3745 12.6563 52.4511
BrandenburgHavel-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/BrandenburgHavel ${OSM_DIR}/BrandenburgHavel

# bbbike @ WarenMueritz
WarenMueritz: WarenMueritz-download WarenMueritz-convert
WarenMueritz-download:
	mkdir -p ${OSM_DIR}/WarenMueritz
	${DOWNLOADOSM} -o ${OSM_DIR}/WarenMueritz -- 12.5982 53.4811 12.7647 53.5488
WarenMueritz-convert:
	${OSM2BBD} -centerdelta 8.41,47.25 -o ${DATA_OSM_DIR}/WarenMueritz ${OSM_DIR}/WarenMueritz

##############################################################################################

create-bbbike-web-symlinks:
	cd ${BBBIKE_WEB_DIR}/cgi && \
	for city in ${CITIES}; do \
		ln -fs world.cgi $$city.cgi; \
		ln -fs world.cgi $$city.en.cgi; \
		ln -fs world.cgi.config $$city.cgi.config; \
	done
	ln -fs `pwd`/misc/index.html ${BBBIKE_WEB_DIR}
	ln -fs `pwd`/misc/world.cgi ${BBBIKE_WEB_DIR}/cgi
	ln -fs `pwd`/misc/world.cgi.config ${BBBIKE_WEB_DIR}/cgi


scp rsync rsync-tgz:
	rsync -av ${OSMBIKE_DATA} wolfram.schneider.org:www/src/bbbike

clean:
	rm -rf data-osm
	mkdir data-osm

dist-clean devel-clean distclean: clean
	rm -rf osm
	mkdir -p osm

help:
	@echo "usage: make [ help | cities | convert | rsync-tgz | rsync-source ]"
	@echo "            [ tarball | clean | dist-clean | create-bbbike-web-symlinks ]"
	@echo ""
	@echo "            [ ${CITIES} ]"

